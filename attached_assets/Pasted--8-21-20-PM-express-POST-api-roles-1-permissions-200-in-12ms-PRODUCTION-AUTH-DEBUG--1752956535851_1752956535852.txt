}

8:21:20 PM [express] POST /api/roles/1/permissions 200 in 12ms

ğŸ” PRODUCTION AUTH DEBUG: {

  url: '/api/roles/1/permissions',

  method: 'GET',

  isAuthenticated: true,

  hasUser: true,

  userId: 'admin_local',

  username: 'admin',

  sessionId: '49CgzTUxVSzvnQCCj0UU5vRA2SZUhYeY',

  hasSession: true,

  sessionData: [ 'cookie', 'passport' ],

  cookies: 'HAS_COOKIES'

}

âœ… PRODUCTION AUTH: User authenticated, proceeding

ğŸ” PRODUCTION AUTH DEBUG: {

  url: '/api/permissions',

  method: 'GET',

  isAuthenticated: true,

  hasUser: true,

  userId: 'admin_local',

  username: 'admin',

  sessionId: '49CgzTUxVSzvnQCCj0UU5vRA2SZUhYeY',

  hasSession: true,

  sessionData: [ 'cookie', 'passport' ],

  cookies: 'HAS_COOKIES'

}

âœ… PRODUCTION AUTH: User authenticated, proceeding

ğŸ” PRODUCTION Permissions API - User ID: admin_local

ğŸ” PRODUCTION getRolePermissions() - Starting for role ID: 1

âŒ Error in PRODUCTION getRolePermissions: error: column rp.created_at does not exist

    at /app/node_modules/pg-pool/index.js:45:11

    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)

    at async DatabaseStorage.getRolePermissions (file:///app/dist/index.js:3439:26)

    at async file:///app/dist/index.js:5774:32 {

  length: 199,

  severity: 'ERROR',

  code: '42703',

  detail: undefined,

  hint: 'Perhaps you meant to reference the column "p.created_at" or the column "r.created_at".',

  position: '78',

  internalPosition: undefined,

  internalQuery: undefined,

  where: undefined,

  schema: undefined,

  table: undefined,

  column: undefined,

  dataType: undefined,

  constraint: undefined,

  file: 'parse_relation.c',

  line: '3685',

  routine: 'errorMissingColumn'

}

ğŸ” ROLE PERMISSIONS DEBUG for role ID: 1

ğŸ“Š Total role permissions found: 0

âŒ NO ROLE PERMISSIONS FOUND AT ALL for role: 1

8:21:20 PM [express] GET /api/roles/1/permissions 200 in 14ms

ğŸ‘¤ PRODUCTION Permissions API - User found: admin

ğŸ” PRODUCTION Fetching all permissions...

ğŸ” PRODUCTION getPermissions() - Starting query...

ğŸ“Š PRODUCTION getPermissions() - Total permissions found: 56

ğŸ“‹ PRODUCTION Task permissions found: 5

  - ID 56: tasks_assign -> "Assigner tÃ¢ches"

  - ID 53: tasks_create -> "CrÃ©er tÃ¢ches"

  - ID 55: tasks_delete -> "Supprimer tÃ¢ches"

  - ID 52: tasks_read -> "Voir tÃ¢ches"

  - ID 54: tasks_update -> "Modifier tÃ¢ches"

ğŸ›ï¸ PRODUCTION Admin permissions found: 3

  - ID 40: nocodb_config_read -> "Voir config NocoDB"

  - ID 41: nocodb_config_update -> "Modifier config NocoDB"

  - ID 42: system_admin -> "Administration systÃ¨me"

âœ… PRODUCTION getPermissions() - Returning mapped result: 56

ğŸ“ PRODUCTION Permissions fetched: 56 items

ğŸ·ï¸ PRODUCTION Categories found: [

  'administration',

  'calendrier',

  'commandes',

  'commandes_clients',

  'fournisseurs',

  'gestion_dlc',

  'gestion_roles',

  'gestion_taches',

  'livraisons',

  'magasins',

  'publicites',

  'rapprochement',

  'tableau_de_bord',

  'utilisateurs'

]

ğŸ“‹ PRODUCTION Task permissions found: 5

ğŸ“‹ PRODUCTION Task permissions details:

  - ID: 56, Name: tasks_assign, DisplayName: "Assigner tÃ¢ches", Category: gestion_taches

  - ID: 53, Name: tasks_create, DisplayName: "CrÃ©er tÃ¢ches", Category: gestion_taches

  - ID: 55, Name: tasks_delete, DisplayName: "Supprimer tÃ¢ches", Category: gestion_taches

  - ID: 52, Name: tasks_read, DisplayName: "Voir tÃ¢ches", Category: gestion_taches

  - ID: 54, Name: tasks_update, DisplayName: "Modifier tÃ¢ches", Category: gestion_taches

8:21:20 PM [express] GET /api/permissions 304 in 34ms

8:21:39 PM [express] HEAD /api/health 200 in 0ms

8:22:09 PM [express] HEAD /api/health 200 in 0ms


      
      
    