      plannedDate: 2025-07-22T00:00:00.000Z,

      supplierName: 'Sovacom',

      groupName: 'Houdemont'

    }

  ]

}

ğŸ“¦ Orders returned: 1 items

9:27:50 AM [express] GET /api/user 304 in 16ms

9:27:50 AM [express] GET /api/orders 200 in 148ms

ğŸ” PRODUCTION AUTH DEBUG: {

  url: '/api/dlc-products/stats?',

  method: 'GET',

  isAuthenticated: true,

  hasUser: true,

  userId: 'nicolasvoignier_1753176398084',

  username: 'Nicolas',

  sessionId: '7vJVeUfECkXO4bJPZR_fs0IEM8eZMWxJ',

  hasSession: true,

  sessionData: [ 'cookie', 'passport' ],

  cookies: 'HAS_COOKIES'

}

âœ… PRODUCTION AUTH: User authenticated, proceeding

Customer orders - User assigned stores: { groupIds: [ 2 ] }

ğŸ“Š Query results: {

  ordersCount: '1',

  deliveriesCount: '0',

  orderStats: { pending_count: '1', total_palettes: '0', total_packages: '0' },

  deliveryStats: { total_palettes: '0', total_packages: '0' }

}

9:27:50 AM [express] GET /api/tasks 304 in 139ms

Customer orders returned from storage: 0 items

ğŸ“Š Final stats: {

  ordersCount: 1,

  deliveriesCount: 0,

  pendingOrdersCount: 1,

  averageDeliveryTime: 0,

  totalPalettes: 0,

  totalPackages: 0

}

9:27:50 AM [express] GET /api/customer-orders 304 in 160ms

DLC Stats API called with: {

  userId: 'nicolasvoignier_1753176398084',

  userRole: 'Directeur Houdemont',

  groupIds: [ 2 ],

  storeId: undefined

}

ğŸ“Š DLC Stats - groupIds: [ 2 ]

ğŸ“Š DLC Stats query: 

        SELECT 

          status,

          dlc_date,

          expiry_date,

          COUNT(*) as count,

          SUM(quantity) as total_quantity,

          CASE 

            WHEN COALESCE(dlc_date, expiry_date) < CURRENT_DATE THEN 'expired'

            WHEN COALESCE(dlc_date, expiry_date) <= CURRENT_DATE + INTERVAL '15 days' THEN 'expiring_soon'

            ELSE 'active'

          END as calculated_status

        FROM dlc_products

       WHERE group_id = ANY($1) GROUP BY status, dlc_date, expiry_date, calculated_status

ğŸ“Š DLC Stats params: [ [ 2 ] ]

9:27:50 AM [express] GET /api/stats/monthly 200 in 170ms

ğŸ“Š DLC Stats raw result: []

ğŸ“Š DLC Stats final: {

  active: 0,

  expiringSoon: 0,

  expired: 0,

  valide: 0,

  en_cours: 0,

  total: 0,

  totalQuantity: 0

}

DLC Stats returned: {

  active: 0,

  expiringSoon: 0,

  expired: 0,

  valide: 0,

  en_cours: 0,

  total: 0,

  totalQuantity: 0

}

9:27:50 AM [express] GET /api/dlc-products/stats 304 in 157ms

ğŸ” PRODUCTION AUTH DEBUG: {

  url: '/api/groups',

  method: 'GET',

  isAuthenticated: true,

  hasUser: true,

  userId: 'nicolasvoignier_1753176398084',

  username: 'Nicolas',

  sessionId: '7vJVeUfECkXO4bJPZR_fs0IEM8eZMWxJ',

  hasSession: true,

  sessionData: [ 'cookie', 'passport' ],

  cookies: 'HAS_COOKIES'

}

âœ… PRODUCTION AUTH: User authenticated, proceeding

9:27:50 AM [express] GET /api/groups 200 in 7ms

9:28:16 AM [express] HEAD /api/health 200 in 1ms


      
      
    